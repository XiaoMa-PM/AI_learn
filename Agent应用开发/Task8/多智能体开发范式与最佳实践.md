# 多智能体开发范式与最佳实践
---
🧑‍🔧作者：范文栋
- CAMEL-AI核心成员，CAMEL和OWL
- 两个万星开源项目的核心开发者和维护者

## 如何构建Single Agent
---
🔗项目link：[camel-workshop/🐫\_CAMEL\_Creating\_Your\_First\_Agent.ipynb at main · camel-ai/camel-workshop · GitHub](https://github.com/camel-ai/camel-workshop/blob/main/%F0%9F%90%AB_CAMEL_Creating_Your_First_Agent.ipynb)

1. 导入camel_ai的相关库
```python
from camel_ai.messages import SystemMessage, UserMessage
from camel_ai.types import RoleType
from camel_ai.agents import ChatAgent
```
2. 定义agent的角色和任务
```python
# 1. 定义系统消息：我是谁？我该怎么做？
# 这就像在定义一个“工具”或“能力”
agent_role_prompt = "你是一个专业的Python程序员，擅长编写简洁、高效的代码。"
system_message = SystemMessage(
    role_name="Python程序员",
    role_type=RoleType.ASSISTANT,
    content=agent_role_prompt,
)

# 2. 定义用户消息：具体要解决什么问题？
task_prompt = "请编写一个名为'add'的Python函数，该函数接收两个整数作为输入，并返回它们的和。"
user_message = UserMessage(
    role_name="用户",
    content=task_prompt,
)
```
3. 实例并初始化agent
```python
# 将“大脑”(LLM模型，这里默认使用GPT-4)和“角色定义”组合起来，创建一个Agent实例 assistant_agent = ChatAgent(system_message) assistant_agent.reset() # 清空Agent的记忆，准备开始新任务
```
4. 运行agent并获取结果（ReAct框架思路）
```python
# 这一步是关键，它体现了ReAct框架的核心思想
# agent.step() 就像 ReAct 中的一次 "思考 -> 行动" 循环

# 第一次step: Agent接收初始任务
# 思考：用户让我写一个add函数。
# 行动：生成函数的代码草稿。
assistant_response = assistant_agent.step(user_message)

print(assistant_response.msgs[0].content)
```
这个项目核心学习的内容上：
内部逻辑：
- **推理 (Reasoning)**：Agent根据其系统消息（“我是个Python程序员”）和当前收到的任务（“写一个add函数”）进行思考。
- **行动 (Acting)**：Agent采取行动，即生成一段文本（这里是Python代码）作为响应。
- **观察 (Observation)**：`assistant_response` 就是Agent行动后的结果，我们可以观察它，并决定下一步是继续让Agent完善，还是任务已完成。对于更复杂的任务，我们会将这个`response`作为新的输入，进行多次`step`循环。

引入CAMEL库-->api_key-->定义模型-->设置chat agent的message（上下文记忆量）-->定义交流信息-->工具调用（CAMEL有多个Toolkits可以直接调用）-->Memory查看历史信息并增删改查-->agent reset

## 多智能体
---
引子：发表的论文对比Role-Playing Framework
human input-->Task agent-->Task-->AI user+AI Assistant不断交互输出结果

🔗项目link：[camel-workshop/🐫\_CAMEL\_Creating\_Slides\_with\_Agent.ipynb at main · camel-ai/camel-workshop · GitHub](https://github.com/camel-ai/camel-workshop/blob/main/%F0%9F%90%AB_CAMEL_Creating_Slides_with_Agent.ipynb)

## Eiagent
---
### OWL｜system Architecture
![](inbox/Pasted%20image%2020251003010227.png)
特征：无压缩、无损失、鲁棒性好
局限性：上限问题（无法并行）

### Workforce
![](inbox/Pasted%20image%2020251003010227.png)

### Eigent
🔗项目link：[camel/examples/workforce/eigent.py at master · camel-ai/camel · GitHub](https://github.com/camel-ai/camel/blob/master/examples/workforce/eigent.py)
🔗项目link：[GitHub - eigent-ai/eigent: Eigent is the World's First Multi-agent Workforce to Unlock Your Exceptional Productivity.](https://github.com/eigent-ai/eigent)
其核心由开发者agent、检索agent、文档agent、多模态ganet构成

## Q&A
---
AI user在该项目中只起到了规划作用？
有规划、批判

对话过长好不好溢出？
CAMEL有记忆预处理，切片后重新载入

Eigent需要本地部署模型吗？
支持云端免费一定的token，也可以api key，也支持本地部署

Oassis对社会模拟方面的了解？
之前本研究所有做过100万token agent模拟在社交平台表现，去研究从众效应

Camel有整合MCP、A2A、AP2吗？
目前整合了MCP，A2A新版本会有，AP2是谷歌的支付协议，还在继续凑备

参与oasis开发者会议？
🔗项目link：[GitHub - camel-ai/oasis: 🏝️ OASIS: Open Agent Social Interaction Simulations with One Million Agents.](https://github.com/camel-ai/oasis#-community--contact)

agent如何分配资源？
目前task-agent与XXX-agent一起就行task分配，之后Camel会就行多个相同agent并行各自任务，实现高效并行

Eigent中，每个agent自己做笔记，为什么不同步笔记，共享上下文？
本身设定可选择开启，不开启原因：
- token消耗，不共享的7倍
- 信息过多，导致不同agent互相带歪影响
处理：需要更加精准的管理上下文任务传递

