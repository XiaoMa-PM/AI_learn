# Dify MCPç»¼åˆåº”ç”¨
---
ğŸ§‘â€ğŸ”§ä½œè€…ï¼šç‹ç† æ˜
ğŸ”—é“¾æ¥ï¼š[Dify MCPç»¼åˆåº”ç”¨ - é£ä¹¦äº‘æ–‡æ¡£](https://spvrm23ffj.feishu.cn/docx/Nmbjde0GtoLMvBxuy4hc3YHTnVc)
å­¦ä¹ æ—¶é—´ï¼š2025/10/4
ç®€ä»‹ï¼šè®²è¿°Model Context Protocolï¼ˆMCPï¼‰æ‰€è§£å†³æ‰çš„Function callingçš„å±€é™æ€§ï¼Œ

## MCPä»‹ç»
---
æŠŠAgentæ¯”å–»æˆäººç±»çš„è¯ï¼ŒLLMç›¸å½“äºäººç±»çš„å¤§è„‘ä¸ä¸»è§‚æ„è¯†é©±åŠ¨ï¼Œæ²¡æœ‰æ‰‹è„šä¸å·¥å…·ï¼Œä»…èƒ½å®ç°å¯¹è¯äº¤äº’ï¼›Toolsç›¸å½“äºAgentçš„æ‰‹è„šä¸å·¥å…·ï¼Œè€ŒMCPåˆ™æ˜¯æ‰“åŒ…å¥½çš„å·¥å…·ï¼ˆæœªæ¥ï¼šæœ‰ç»´æŠ¤ã€æœ‰ç®¡ç†ã€æœ‰è¿­ä»£çš„ï¼‰ã€‚

>åŸæ–‡è¿˜è®²è¿°äº†å·¥å…·å®ç°é€»è¾‘ï¼Œæ­¤å¤„è·³è¿‡

**å®¢æœå¯¹è¯æµç¨‹ç¤ºä¾‹**
å‡è®¾ç”¨æˆ·æé—®ï¼šâ€œHi, can you tell me the delivery date for my order?â€
åŠ©æ‰‹åº”æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š
1. è¯†åˆ«æ„å›¾ï¼šç”¨æˆ·æ˜ç¡®è¦æ±‚â€œdelivery dateâ€ï¼Œç¬¦åˆå·¥å…·è°ƒç”¨æ¡ä»¶ã€‚
2. å‚æ•°æå–ï¼šéœ€å¼•å¯¼ç”¨æˆ·æä¾›Â `order_id`ï¼ˆå› æ¶ˆæ¯ä¸­æœªç›´æ¥åŒ…å«è¯¥ä¿¡æ¯ï¼‰ï¼š
_â€œSure! Please provide your order ID so I can check the delivery schedule.â€_
3. å·¥å…·è°ƒç”¨ï¼šè·å¾—Â `order_id`Â åï¼Œåå°æ‰§è¡ŒÂ `get_delivery_date(order_id="XXX")`ã€‚
4. è¿”å›ç»“æœï¼šå‘ç”¨æˆ·å±•ç¤ºå‡½æ•°è¿”å›çš„é…é€æ—¥æœŸï¼ˆå¦‚Â _â€œæ‚¨çš„è®¢å•é¢„è®¡åœ¨2025å¹´6æœˆ25æ—¥18:00å‰é€è¾¾â€_ï¼‰ã€‚

**æç¤ºè¯ä¹¦å†™Function Callçš„å±€é™æ€§**
- å†™ä¸€å¤§æ®µå¤æ‚æç¤ºè¯ï¼Œéœ€è¦è¯­æ–‡åŠŸåº•
- ç›¸åŒçš„å‡½æ•°å’Œå·¥å…·ï¼Œå¼€å‘å¾ˆå¤šæ¬¡é‡å¤ä¹¦å†™ç›¸åŒå†…å®¹ï¼ˆæ¨¡å‹å›å¤æ ¼å¼æ’°å†™ã€è°ƒè¯•æç¤ºè¯ï¼‰
- ä¸åŒè½¯ä»¶å‚å•†çš„APIæ¥å£ä½¿ç”¨æ–¹å¼ä¹Ÿä¸ç»Ÿä¸€
- æ²¡æœ‰ç»Ÿä¸€å¸‚åœºå’Œç”Ÿæ€ï¼Œå„è‡ªå¼€å‘æ¨¡å‹ä¸ºæˆ˜
- å‚å•†çš„æ™ºèƒ½ä½“å¤§æ¨¡å‹ç¼–æ’èƒ½åŠ›å‚å·®ä¸é½ï¼Œæ ‡å‡†ä¸ä¸€è‡´

**MCPåè®®ä½œç”¨**
ä¸€ç§è¿æ¥ã€å¤§æ¨¡å‹ï¼ˆå®¢æˆ·ç«¯ï¼‰ã€‘å’Œã€å„ç§å·¥å…·åº”ç”¨ï¼ˆæœåŠ¡ç«¯ï¼‰ã€‘çš„ç»Ÿä¸€æ¥å£
è§£å†³â€œç»Ÿä¸€å¤§æ¨¡å‹è°ƒç”¨å·¥å…·çš„æ–¹æ³•â€é—®é¢˜

**MCPçš„åº”ç”¨æ¡ˆä¾‹**
- è°ƒç”¨Unityçš„MCPæ¥å£ï¼Œè®©AIè‡ªå·±å¼€å‘æ¸¸æˆã€‚ https://www.bilibili.com/video/BV1kzoWYXECJ
- è°ƒç”¨Blenderçš„MCPæ¥å£ï¼Œè®©AIè‡ªå·±3Då»ºæ¨¡ã€‚ https://www.bilibili.com/video/BV1pHQNYREAX
- è°ƒç”¨ç™¾åº¦åœ°å›¾çš„MCPæ¥å£ï¼Œè®©AIè‡ªå·±è”ç½‘ï¼ŒæŸ¥è·¯å†µï¼Œå¯¼èˆªã€‚ https://www.bilibili.com/video/BV1dbdxY5EUP
- è°ƒç”¨Playwrightçš„MCPæ¥å£ï¼Œè®©AIè‡ªå·±æ“ä½œç½‘é¡µã€‚

**MCPåè®®çš„é€šä¿¡åŒæ–¹**
- **MCP Host**ï¼šäººç±»ç”µè„‘ä¸Šå®‰è£…çš„å®¢æˆ·ç«¯è½¯ä»¶ï¼Œä¸€èˆ¬æ˜¯Difyã€Cursorã€Claude Desktopã€Cherry Studioã€Clineï¼Œè½¯ä»¶é‡Œå¸¦äº†å¤§è¯­è¨€æ¨¡å‹ï¼Œåé¢çš„æ•™ç¨‹ä¼šå¸¦ä½ å®‰è£…é…ç½®ã€‚
- **MCP Server**ï¼šå„ç§è½¯ä»¶å’Œå·¥å…·çš„MCPæ¥å£ï¼Œæ¯”å¦‚ï¼š ç™¾åº¦åœ°å›¾ã€é«˜å¾·åœ°å›¾ã€æ¸¸æˆå¼€å‘è½¯ä»¶Unityã€ä¸‰ç»´å»ºæ¨¡è½¯ä»¶Blenderã€æµè§ˆå™¨çˆ¬è™«è½¯ä»¶Playwrightsã€èŠå¤©è½¯ä»¶Slackã€‚å°½ç®¡ä¸åŒè½¯ä»¶æœ‰ä¸åŒçš„åŠŸèƒ½ï¼Œä½†éƒ½æ˜¯ä»¥MCPè§„èŒƒå†™æˆçš„serveræ–‡ä»¶ï¼Œå¤§æ¨¡å‹ä¸€çœ¼å°±çŸ¥é“æœ‰å“ªäº›å·¥å…·ï¼Œæ¯ä¸ªå·¥å…·æ˜¯ä»€ä¹ˆå«ä¹‰ã€‚

**MCPçš„Hostã€Clientã€Serveræ˜¯ä»€ä¹ˆå…³ç³»**
Hostå°±æ˜¯Difyã€Cursorã€Clineã€CherryStudioç­‰MCPå®¢æˆ·ç«¯è½¯ä»¶ã€‚
æ¯ä¸ªMCPæœåŠ¡éœ€è¦å¯¹åº”Hostä¸­çš„ä¸€ä¸ªClientæ¥ä¸€å¯¹ä¸€é€šä¿¡ã€‚Clientè¢«åŒ…å«åœ¨Hostä¸­ã€‚
![](inbox/æ¶æ„å›¾3.png)

Clientæ˜¯Hostä¸Serverçš„æ¡¥æ¢ï¼Œè´Ÿè´£å®ç°å…·ä½“æœåŠ¡

**å¤§æ¨¡å‹æ„ŸçŸ¥å·¥å…·è°ƒç”¨åŠå…¶ä½œç”¨**
æ¯ä¸ªæ”¯æŒMCPçš„è½¯ä»¶ï¼Œéƒ½æœ‰ä¸€ä¸ªMCP Serveræ–‡ä»¶ï¼Œé‡Œé¢åˆ—å‡ºäº†æ‰€æœ‰æ”¯æŒè°ƒç”¨çš„å‡½æ•°ï¼Œå‡½æ•°æ³¨é‡Šé‡Œçš„å†…å®¹æ˜¯ç»™AIçœ‹çš„ï¼Œå‘Šè¯‰AIè¿™ä¸ªå‡½æ•°æ˜¯åšä»€ä¹ˆç”¨çš„ã€‚
MCP Serveræ–‡ä»¶å°±æ˜¯ç»™AIçœ‹çš„å·¥å…·è¯´æ˜ä¹¦ã€‚

ä¾‹å¦‚ç™¾åº¦åœ°å›¾MCPæ¡ˆä¾‹ï¼š
https://github.com/baidu-maps/mcp/blob/main/src/baidu-map/python/src/mcp_server_baidu_maps/map.py
æ¯ä¸ªä»¥`@mcp.tool()`å¼€å¤´çš„å‡½æ•°ï¼Œéƒ½æ˜¯ä¸€ä¸ªç™¾åº¦åœ°å›¾æ”¯æŒMCPè°ƒç”¨çš„åŠŸèƒ½ã€‚
![](inbox/8-ç™¾åº¦åœ°å›¾server.png)
Difyå…³äºMCPä»‹ç»ï¼š[mp.weixin.qq.com/s/CDhqmLO1JXSB\_\_aUMqoGoQ](https://mp.weixin.qq.com/s/CDhqmLO1JXSB__aUMqoGoQ)
## Difyçš„MCPæ’ä»¶
---
**Difyæ’ä»¶ä»‹ç»**
- Difyå¹³å°çš„æ¨¡å‹å’Œå·¥å…·ä»¥æ’ä»¶å½¢å¼ç‹¬ç«‹è¿è¡Œ
- çƒ­æ’æ‹”è®¾è®¡æ’ä»¶

Difyæ’ä»¶å¸®åŠ©æ–‡æ¡£>>[åŠŸèƒ½ç®€ä»‹ - Dify Docs](https://docs.dify.ai/zh-hans/plugins/introduction)

MCPæ’ä»¶æ¥æºï¼š
- Dify Marketplace
- ç¤¾åŒºå…±äº«ï¼šGitHub
- æœ¬åœ°ç§åŸŸ

Difyä¸MCP/A2Açš„å…³ç³»æ˜¯ä»€ä¹ˆï¼Ÿ
Agent2Agentï¼ˆA2Aï¼‰ï¼šè°·æ­Œæ¨å‡ºçš„å¼€æºåè®®ï¼Œä½œä¸ºAgentçš„ã€Œé€šç”¨é€šä¿¡è¯­è¨€ã€

æ’ä»¶æ›´æ–°åœ¨å…¶GitHubæœ‰äººæäº¤

Agentç­–ç•¥

**Dify MCPæ’ä»¶**
- MCP SSE
- StreamableHTTP

**è¡¥å……ï¼šMCP SSEçš„ä½¿ç”¨ä¸æˆæƒ**
å¤šMCP SSEæ¨¡ç‰ˆ
```JSON
{
  "mcpServers": {
      "server_name1": {
        "transport": "sse",
        "url": "http://127.0.0.1:8000/sse",
        "headers": {},
        "timeout": 50,
        "sse_read_timeout": 50
      },
      "server_name2": {
        "transport": "sse",
        "url": "http://127.0.0.1:8001/sse"
      },
      "server_name3": {
        "transport": "streamable_http",
        "url": "http://127.0.0.1:8002/mcp",
        "headers": {},
        "timeout": 50
      },
      "server_name4": {
        "transport": "streamable_http",
        "url": "http://127.0.0.1:8003/mcp"
      }
    }
}
```

## MCPå›½å†…å¹³å°åŠåº”ç”¨æœåŠ¡
---
### ä½¿ç”¨é­”æ­ç¤¾åŒºMCPå¹¿åœº
[é­”æ­ç¤¾åŒº](https://modelscope.cn/mcp)
### 12306MCP
`{  "server_name": {    "url": "http://127.0.0.1:8000/sse",    "headers": {}, "timeout": 50,    "sse_read_timeout": 50  }}`

ç¤¾åŒºå†…é€‰æ‹©æŸä¸€å·¥å…·ï¼š
- ç‚¹å‡»â€œè¿æ¥â€äº§ç”Ÿæˆæƒçš„JSONï¼Œè¾“å…¥åˆ°SEEä¸­
- ç‚¹å‡»â€œå·¥å…·æµ‹è¯•â€ã€‚æŸ¥çœ‹MCPå·¥å…·æ‰€å…·å¤‡çš„èƒ½åŠ›ä¸å…·ä½“æ–¹å¼

### åŠ›æ‰£MCP
åŠ›æ‰£MCPæ˜¯ä¸€ä¸ªç®—æ³•ç»ƒä¹ çš„å¹³å°ï¼Œå¯ä»¥å°±è¡Œä¸€äº›ç¼–ç¨‹è¯­è¨€å°ç»ƒä¹ 
LeetCode MCPæœåŠ¡å™¨



### å›½å†…æ”¯æŒMCPçš„äº§å“
#### é«˜å¾·åœ°å›¾MCP

#### æ™ºè°±æœç´¢MCP


### è¡¥å……ï¼šLocalçš„MCPè¿›è¡Œæœ¬åœ°éƒ¨ç½²çš„æµç¨‹
Hostedå±äºé­”æ­æ‰˜ç®¡çš„MCPæœåŠ¡
Localéœ€è¦è‡ªè¡Œæœ¬åœ°éƒ¨ç½²



## æ­å»ºä¸€ä¸ªMCPæ™ºèƒ½ä½“
---
- Difyç›®å‰æ”¯æŒMCPçš„æœ‰ä¸‰ä¸ªåº”ç”¨ç±»å‹ï¼šå·¥ä½œæµã€ChatFlowã€Agent
- è®¾ç½®Prompt
- æ·»åŠ å·¥å…·ï¼šè·å–MCPå·¥å…·åˆ—è¡¨ã€è°ƒç”¨MCPå·¥å…·ã€timeè·å–å½“å‰æ—¶é—´

**å®è·µæˆåŠŸæ¡ˆä¾‹**ï¼š
![](inbox/Pasted%20image%2020251007011636.png)

## MCPå·¥ä½œæµå®è·µ
---

## å·¥ä½œæµè½¬æ¢MCPä»‹ç»
---
